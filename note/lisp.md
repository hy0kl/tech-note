# note

- 有两种方法来表示空列表:用一对不包括任何东西的括号来表示，或用符号 nil 来表示空表。
- `let`是一个最常用的 Common Lisp 的操作符之一，它引入新的局部变量（local variable）
- 给`defparameter`传入符号和值，来创建一个全局变量
- 用`defconstant`来定义一个全局的常量
- 检查某些符号，是否为一个全局变量或常量，使用`boundp`函数
- 普遍的赋值操作符（assignment operator）是`setf`
- 如果`setf`的第一个实参是符号（symbol），且符号不是某个局部变量的名字，则`setf`把这个符号设为全局变量
- `(setq *print-case* :capitalize)`

# 列表操作 (List Operations)

- 用函数`cons`来构造列表
- 取出列表元素的基本函数是`car`和`cdr`
- `listp`
- 用`defun`来定义新函数
- 递归 (Recursion)

-----

# 实用 Common Lisp 编程

## 第2章 周而复始: REPL 简介

- read-eval-print loop
- NIL是lisp版本的逻辑假和空值
- 使用`load`加载一个文件
- 另一种加载文件中有用定义的方法是,先用`compile-file`编译,然后再用`load`加载编译后产生的文件,也就是FASL文件-快速加载文件(fast-load file)的简称.`compile-file`将返回FASL文件的名字.`(load (compile-file "file.lisp"))`

### 第一个程序

```
(format t "hello, world!")
(write-line "hello, world!")
(print "hello, world!")
```

## 第3章 简单的数据库

- 属性列表(property list, plist): 从第一个元素开始的所有相间元素都是一个用来描述接下来的那个元素的符号.
- 关键字符号是任何以冒号开始的名字.
- `getf`接受一个plist和一个符号,并返回plist中跟在那个符号后面的值.
- 使用`defvar`宏来定义全局变量,名字中的星号是lisp的全局变量命名约定.
- `t`是标准输出流(\*standard-output\*)的简称
- `~a`指令是美化指令,它的意图是消耗一个实参,然后将其输出成人类可读的形式.这将使得关键字被渲染成不带前导冒号的形式,而字符串也不再有引号了.
- `-t`指令用于制表.`~10t`告诉`format`产生足够的空格,以确保在处理下一个`~a`之前光标移动10列.`~t`指令不使用任何实参.
- `~%` 指令并不消耗任何实参,而是告诉`format`来产生一个换行.
- `setf`宏是CommonLisp最主要的赋值操作符.它将其第一个参数设置成其第二个参数的求值结果.
- 函数`remove-if-not`接受一个谓词和一个原始列表,然后返回一个仅包含原始列表中匹配该谓词的所有元素的新列表.谓词参数可以是任何接受单一参数并能返回布尔值的函数---除了NIL表示假以外其余的都表示真.
- `#'`记号是"获取函数,其名如下"的简称.
- `lambda`并不是函数的名字,它只是一个表明正在定义匿名函数的指示器.但除了缺少名字以外,一个`lambda`表达式看起来很像一个`defun`:单词`lambda`后面紧跟着形参列表,然后是函数体.
- 关键字形参(keyword parameter),形参列表开始处有一个`&key`.如果一个特定的关键字在调用中没有指定,对应的变量将被设置成NIL.
- 为了区分作为实参显示传递给关键字形参的NIL和作为默认值的NIL,可以将简单的名称替换成一个包括形参名,默认值和另一个称为`supplied-p`形参的列表.`supplied-p`形参可被设置成真或假,具体取决于实参在特定的函数调用里是否真的被传入相应的关键字形参中.
- `remove-if`所返回的列表中,所有确实匹配谓词的元素都被删除.
- `reverse`函数授受一个列表作为参数并返回一个逆序的新列表.
- 宏与函数的主要词法差异在于需要用`defmacro`而不是`defun`来定义一个宏.
- 在一个反引用表达式里,任何以逗号开始的子表达式都是被求值的.
- `,@`是`,`的变体,可以将接下来的表达式(必须求值成一个列表)的值嵌入到其外围的列表里.
- `&rest`改变了解析参数的方式.当参数列表里面带有`&rest`时,一个函数或宏可以接受任意数量的实参,它们将被收集到一个单一列表中,并成为那个跟在`&rest`后面的名字对应的变量的值.


